<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô ‡πÄ‡∏õ‡πà‡∏≤‡∏â‡∏∏‡∏ö by rs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/js/all.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@200;400;600;800&family=Rajdhani:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <style>
        :root { --main: #d4af37; --bg: #050505; --panel: rgba(20, 20, 20, 0.95); }
        body { font-family: 'Kanit', sans-serif; background: var(--bg); color: #fff; -webkit-tap-highlight-color: transparent; }
        
        .glass { background: var(--panel); backdrop-filter: blur(20px); border: 1px solid rgba(212, 175, 55, 0.15); box-shadow: 0 0 30px rgba(0,0,0,0.8); border-radius: 16px; }
        .gold-txt { background: linear-gradient(to bottom, #fff, #d4af37); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .btn-gold { background: linear-gradient(45deg, #d4af37, #aa8a2e); color: #000; font-weight: 800; border-radius: 10px; transition: 0.2s; box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3); }
        .btn-gold:active { transform: scale(0.96); }
        .input-box { background: #0f0f0f; border: 1px solid #333; color: #fff; padding: 12px; border-radius: 10px; width: 100%; outline: none; transition: 0.3s; }
        .input-box:focus { border-color: var(--main); }
        
        .rps-card { width: 80px; height: 80px; border-radius: 50%; background: #222; border: 2px solid #444; display: flex; justify-content: center; align-items: center; font-size: 2.5rem; cursor: pointer; transition: 0.2s; }
        .rps-card.selected { background: #d4af37; border-color: #fff; transform: scale(1.1); box-shadow: 0 0 20px #d4af37; }

        .nav-item { color: #666; font-size: 10px; display: flex; flex-direction: column; align-items: center; gap: 2px; }
        .nav-item.active { color: #d4af37; transform: translateY(-2px); }
        
        #loader { position: fixed; inset: 0; background: #000; z-index: 999; display: flex; justify-content: center; align-items: center; }
    </style>
</head>
<body class="pb-24">

    <div id="loader"><i class="fa-solid fa-circle-notch fa-spin text-4xl text-[#d4af37]"></i></div>

    <div id="auth-view" class="fixed inset-0 z-50 bg-black flex flex-col justify-center px-8 hidden bg-[url('https://www.transparenttextures.com/patterns/dark-leather.png')]">
        <div class="glass p-8 text-center animate__animated animate__zoomIn">
            <h1 class="text-5xl font-bold gold-txt font-['Rajdhani'] mb-2">ARENA</h1>
            <p class="text-xs text-gray-500 tracking-[0.3em] mb-8">VIP MEMBER LOGIN</p>
            <div id="f-login" class="space-y-4">
                <input id="l-email" class="input-box text-center" placeholder="Email / Username">
                <input id="l-pass" type="password" class="input-box text-center" placeholder="Password">
                <button onclick="Auth.login()" class="btn-gold w-full py-3 mt-4">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
                <p class="text-xs text-gray-500 mt-4 cursor-pointer hover:text-white" onclick="UI.toggle('reg')">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏´‡∏°‡πà</p>
            </div>
            <div id="f-reg" class="hidden space-y-3">
                <input id="r-name" class="input-box" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô">
                <input id="r-email" class="input-box" placeholder="‡∏≠‡∏µ‡πÄ‡∏°‡∏•">
                <input id="r-pass" type="password" class="input-box" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
                <button onclick="Auth.reg()" class="btn-gold w-full py-3 mt-2">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏Ñ‡∏£</button>
                <p class="text-xs text-gray-500 mt-4 cursor-pointer hover:text-white" onclick="UI.toggle('log')">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô</p>
            </div>
        </div>
    </div>

    <div id="app-view" class="hidden max-w-md mx-auto min-h-screen relative shadow-2xl border-x border-[#222]">
        <header class="p-5 sticky top-0 z-40 bg-[#050505]/90 backdrop-blur-md border-b border-[#222] flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-11 h-11 rounded-full border-2 border-[#d4af37] p-0.5"><img id="u-img" class="w-full h-full rounded-full bg-black object-cover"></div>
                <div>
                    <p class="text-[9px] text-[#d4af37] font-bold">BALANCE</p>
                    <p id="u-bal" class="text-2xl font-bold font-['Rajdhani'] leading-none">0.00</p>
                </div>
            </div>
            <button onclick="Auth.logout()" class="text-gray-600 hover:text-red-500"><i class="fa-solid fa-power-off text-xl"></i></button>
        </header>

        <div class="p-2 bg-[#d4af37]/10 border-b border-[#d4af37]/20">
            <marquee id="sys-ann" class="text-xs text-gray-300">Welcome to Arena...</marquee>
        </div>

        <main class="p-5 space-y-6">
            <section id="p-home" class="animate__animated animate__fadeIn">
                <div class="glass p-4 mb-6 flex gap-2">
                    <input id="gift-code" class="input-box text-center uppercase text-[#d4af37] font-bold" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏ü‡∏£‡∏µ">
                    <button onclick="Wallet.redeem()" class="btn-gold px-4 whitespace-nowrap">‡∏£‡∏±‡∏ö</button>
                </div>

                <div class="grid grid-cols-2 gap-4 mb-6">
                    <button onclick="UI.page('deposit')" class="glass p-4 flex flex-col items-center gap-2 hover:border-green-500 transition"><i class="fa-solid fa-circle-arrow-down text-2xl text-green-500"></i><span class="text-xs font-bold">‡∏ù‡∏≤‡∏Å‡πÄ‡∏á‡∏¥‡∏ô</span></button>
                    <button onclick="UI.page('withdraw')" class="glass p-4 flex flex-col items-center gap-2 hover:border-red-500 transition"><i class="fa-solid fa-circle-arrow-up text-2xl text-red-500"></i><span class="text-xs font-bold">‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</span></button>
                </div>

                <div>
                    <h3 class="text-[#d4af37] font-bold mb-3 uppercase flex items-center gap-2"><i class="fa-solid fa-gamepad"></i> ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏Å‡∏° (Lobby)</h3>
                    <div id="room-list" class="space-y-3 pb-20"></div>
                </div>
            </section>

            <section id="p-game" class="hidden h-[70vh] flex flex-col relative">
                <div class="flex justify-between text-xs text-gray-400 mb-4 bg-[#111] p-2 rounded">
                    <span>ROOM: <b id="g-name" class="text-white">...</b></span>
                    <span>BET: <b id="g-bet" class="text-[#d4af37]">0</b></span>
                    <span>ROUND: <b id="g-round" class="text-white">1/3</b></span>
                </div>

                <div class="flex-1 flex flex-col justify-center items-center relative">
                    <div class="text-center absolute top-0">
                        <div class="w-14 h-14 rounded-full border-2 border-red-500 mx-auto p-0.5"><img id="p2-img" class="w-full h-full rounded-full bg-black"></div>
                        <p id="p2-name" class="text-xs mt-1 text-gray-500">Waiting...</p>
                        <div id="p2-move" class="text-4xl mt-2 hidden animate__animated">‚úä</div>
                    </div>

                    <div class="z-10 text-center">
                        <div id="g-status" class="text-xl font-bold text-[#d4af37] animate-pulse">‡∏£‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏∑‡πà‡∏ô...</div>
                        <div id="g-score" class="text-4xl font-['Rajdhani'] font-bold mt-2 text-white">0 - 0</div>
                    </div>

                    <div class="text-center absolute bottom-0">
                        <div id="p1-move" class="text-4xl mb-2 hidden animate__animated">‚úä</div>
                        <div class="w-14 h-14 rounded-full border-2 border-green-500 mx-auto p-0.5"><img id="p1-img" class="w-full h-full rounded-full bg-black"></div>
                        <p id="p1-name" class="text-xs mt-1 text-gray-500">You</p>
                    </div>
                </div>

                <div id="controls" class="grid grid-cols-3 gap-4 mt-auto opacity-50 pointer-events-none transition">
                    <div onclick="Game.move('rock')" class="rps-card mx-auto" id="btn-rock">‚úä</div>
                    <div onclick="Game.move('paper')" class="rps-card mx-auto" id="btn-paper">‚úã</div>
                    <div onclick="Game.move('scissors')" class="rps-card mx-auto" id="btn-scissors">‚úåÔ∏è</div>
                </div>
                <button onclick="Game.leave()" class="absolute top-0 right-0 bg-red-900/50 text-red-400 px-2 py-1 text-[10px] rounded">‡∏≠‡∏≠‡∏Å</button>
            </section>

            <section id="p-finance" class="hidden">
                <button onclick="UI.page('home')" class="mb-4 text-gray-400"><i class="fa-solid fa-arrow-left"></i> ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
                <div class="glass p-6">
                    <h2 id="fin-title" class="text-xl font-bold text-white mb-4">‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</h2>
                    
                    <div id="bank-area" class="mb-4 space-y-2 hidden">
                        <p class="text-xs text-gray-400">‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</p>
                        <div id="sys-banks"></div>
                    </div>

                    <input id="fin-amt" type="number" class="input-box text-center text-2xl font-bold text-[#d4af37] mb-2" placeholder="0.00">
                    <input id="fin-time" class="input-box mb-4 hidden" placeholder="‡πÄ‡∏ß‡∏•‡∏≤‡πÇ‡∏≠‡∏ô (‡πÄ‡∏ä‡πà‡∏ô 12.30)">
                    <button onclick="Wallet.submit()" class="btn-gold w-full py-3">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
                </div>
            </section>
        </main>

        <nav class="fixed bottom-0 w-full h-[70px] bg-[#0a0a0a] border-t border-[#222] flex justify-around items-center z-50 max-w-md">
            <div onclick="UI.page('home')" class="nav-item active" id="nav-home"><i class="fa-solid fa-house text-xl"></i><span>‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span></div>
            <div onclick="window.open(config.contact)" class="nav-item"><i class="fa-brands fa-line text-xl"></i><span>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</span></div>
        </nav>
    </div>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyDc50wlOejDQi3PTySiQss3bLuVz_-tvB4", authDomain: "walletrs-d6104.firebaseapp.com", projectId: "walletrs-d6104", storageBucket: "walletrs-d6104.firebasestorage.app", messagingSenderId: "496661515180", appId: "1:496661515180:web:42c3a21541cdfc68cf8809", measurementId: "G-2P8SGLR602", databaseURL: "https://walletrs-d6104-default-rtdb.asia-southeast1.firebasedatabase.app" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database(); const auth = firebase.auth();
        let user=null, userData={}, config={}, curRoom=null, finType='deposit';

        auth.onAuthStateChanged(u => {
            document.getElementById('loader').style.display='none';
            if(u) { user=u; document.getElementById('auth-view').style.display='none'; document.getElementById('app-view').classList.remove('hidden'); App.init(); }
            else { document.getElementById('auth-view').style.display='flex'; }
        });

        const Auth = {
            login: () => auth.signInWithEmailAndPassword(document.getElementById('l-email').value, document.getElementById('l-pass').value).catch(e=>Swal.fire('Error',e.message,'error')),
            reg: () => auth.createUserWithEmailAndPassword(document.getElementById('r-email').value, document.getElementById('r-pass').value).then(c=>db.ref('users/'+c.user.uid).set({name:document.getElementById('r-name').value,balance:0})).catch(e=>Swal.fire('Error',e.message,'error')),
            logout: () => auth.signOut()
        };

        const App = {
            init: () => {
                db.ref('users/'+user.uid).on('value', s => { userData = s.val() || {}; document.getElementById('u-bal').innerText = userData.balance.toLocaleString(); document.getElementById('u-img').src = `https://ui-avatars.com/api/?name=${userData.name}&background=d4af37&color=000`; });
                
                db.ref('settings').on('value', s => { 
                    config = s.val() || {}; 
                    document.getElementById('sys-ann').innerText = config.announcement || 'Welcome'; 
                    // Load Banks
                    const bList = document.getElementById('sys-banks'); bList.innerHTML='';
                    if(config.banks) Object.values(config.banks).forEach(b => {
                        bList.innerHTML += `<div class="bg-[#111] p-3 rounded border border-[#333] flex justify-between items-center"><div class="flex items-center gap-3"><div class="w-8 h-8 rounded bg-gray-700 flex items-center justify-center text-white font-bold">${b.name[0]}</div><div><p class="font-bold text-sm">${b.name}</p><p class="text-[#d4af37]">${b.acc}</p></div></div><button onclick="navigator.clipboard.writeText('${b.acc}')" class="text-xs bg-[#222] px-2 py-1 rounded border border-[#333]">Copy</button></div>`;
                    });
                });

                db.ref('rooms').on('value', s => {
                    const l = document.getElementById('room-list'); l.innerHTML='';
                    s.forEach(d => {
                        const r = d.val();
                        if(r.status === 'waiting') {
                            const isLocked = r.pass ? '<i class="fa-solid fa-lock text-red-500 ml-1"></i>' : '';
                            l.innerHTML += `<div class="glass p-4 flex justify-between items-center"><div class="flex items-center gap-3"><div class="w-12 h-12 bg-[#222] rounded-xl flex items-center justify-center text-2xl border border-[#333]">üéÆ</div><div><p class="text-white font-bold">${r.name} ${isLocked}</p><p class="text-xs text-gray-400">‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô: <span class="text-[#d4af37] font-bold">${r.bet}</span> | <span class="text-blue-400">${r.maxRound} ‡∏ï‡∏≤</span></p></div></div><button onclick="Game.checkJoin('${d.key}', ${r.bet}, '${r.pass||''}')" class="btn-gold px-4 py-1 text-xs">‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°</button></div>`;
                        }
                    });
                });
            }
        };

        const Game = {
            checkJoin: async (rid, bet, pass) => {
                if(userData.balance < bet) return Swal.fire('‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠','‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô','error');
                if(pass) {
                    const {value: p} = await Swal.fire({title:'‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô', input:'text', background:'#222', color:'#fff'});
                    if(p !== pass) return Swal.fire('‡∏£‡∏´‡∏±‡∏™‡∏ú‡∏¥‡∏î','','error');
                }
                // Join Logic
                db.ref('rooms/'+rid).transaction(r => {
                    if(r && r.status === 'waiting' && !r.players.p2) {
                        r.players.p2 = { uid: user.uid, name: userData.name, score: 0, move: '' };
                        r.status = 'playing'; // Start Game
                        return r;
                    }
                }, (e, c) => {
                    if(c) {
                        db.ref('users/'+user.uid).update({balance: userData.balance - bet});
                        Game.enter(rid);
                    } else Swal.fire('‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡πá‡∏°','','error');
                });
            },
            enter: (rid) => {
                curRoom = rid;
                document.getElementById('p-home').classList.add('hidden');
                document.getElementById('p-game').classList.remove('hidden');
                
                db.ref('rooms/'+rid).on('value', s => {
                    const r = s.val();
                    if(!r) { Game.quit(); return; }

                    document.getElementById('g-name').innerText = r.name;
                    document.getElementById('g-bet').innerText = r.bet;
                    document.getElementById('g-round').innerText = `${r.currentRound}/${r.maxRound}`;
                    document.getElementById('g-score').innerText = `${r.players.p1.score} - ${r.players.p2?r.players.p2.score:0}`;

                    const me = r.players.p1.uid === user.uid ? 'p1' : 'p2';
                    const opp = me === 'p1' ? 'p2' : 'p1';

                    // Update UI
                    document.getElementById('p1-img').src = `https://ui-avatars.com/api/?name=${userData.name}`;
                    if(r.players[opp]) {
                        document.getElementById('p2-name').innerText = r.players[opp].name;
                        document.getElementById('p2-img').src = `https://ui-avatars.com/api/?name=${r.players[opp].name}`;
                    }

                    const controls = document.getElementById('controls');
                    const status = document.getElementById('g-status');

                    if(r.status === 'playing') {
                        if(!r.players[me].move) {
                            status.innerText = "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò!";
                            controls.style.opacity = 1; controls.style.pointerEvents = 'auto';
                        } else {
                            status.innerText = "‡∏£‡∏≠‡∏≠‡∏µ‡∏Å‡∏ù‡πà‡∏≤‡∏¢...";
                            controls.style.opacity = 0.5; controls.style.pointerEvents = 'none';
                        }
                        // Reset Display
                        document.getElementById('p1-move').classList.add('hidden');
                        document.getElementById('p2-move').classList.add('hidden');
                    }
                    else if(r.status === 'calculating') {
                        // Show Moves
                        const map = {rock:'‚úä', paper:'‚úã', scissors:'‚úåÔ∏è'};
                        document.getElementById('p1-move').innerText = map[r.players[me].move];
                        document.getElementById('p2-move').innerText = map[r.players[opp].move];
                        document.getElementById('p1-move').classList.remove('hidden', 'animate__zoomIn');
                        document.getElementById('p2-move').classList.remove('hidden', 'animate__zoomIn');
                        document.getElementById('p1-move').classList.add('animate__zoomIn');
                        document.getElementById('p2-move').classList.add('animate__zoomIn');
                        status.innerText = "‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...";
                    }
                    else if(r.status === 'finished') {
                        let msg = r.winner === 'draw' ? '‡πÄ‡∏™‡∏°‡∏≠! ‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏á‡∏¥‡∏ô' : (r.winner === user.uid ? '‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏ô‡∏∞! ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô' : '‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏û‡πâ!');
                        Swal.fire({title:'‡∏à‡∏ö‡πÄ‡∏Å‡∏°', text:msg, background:'#222', color:'#fff'}).then(()=>Game.quit());
                    }
                });
            },
            move: (m) => {
                db.ref(`rooms/${curRoom}/players`).once('value', s => {
                    const ps = s.val();
                    const me = ps.p1.uid === user.uid ? 'p1' : 'p2';
                    db.ref(`rooms/${curRoom}/players/${me}/move`).set(m);
                });
            },
            quit: () => {
                if(curRoom) db.ref('rooms/'+curRoom).off();
                curRoom = null;
                document.getElementById('p-game').classList.add('hidden');
                document.getElementById('p-home').classList.remove('hidden');
            },
            leave: () => {
                Swal.fire({title:'‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡πâ‡∏≠‡∏á?',text:'‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏û‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ',icon:'warning',showCancelButton:true,background:'#222',color:'#fff'}).then(r=>{
                    if(r.isConfirmed) {
                        // Give win to opponent logic here (Simplified for demo: just leave)
                        Game.quit();
                    }
                });
            }
        };

        const Wallet = {
            redeem: () => {
                const code = document.getElementById('gift-code').value;
                if(!code) return;
                db.ref('codes/'+code).transaction(c => {
                    if(c && !c.used) { c.used = true; return c; }
                    return;
                }, (e, comm, s) => {
                    if(comm) {
                        const val = s.val().amount;
                        db.ref('users/'+user.uid).update({balance: userData.balance + val});
                        Swal.fire('‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',`‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï ${val} ‡∏ö‡∏≤‡∏ó`,'success');
                    } else Swal.fire('‡πÇ‡∏Ñ‡πâ‡∏î‡∏ú‡∏¥‡∏î/‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß','','error');
                });
            },
            submit: () => {
                const amt = document.getElementById('fin-amt').value;
                const time = document.getElementById('fin-time').value;
                if(!amt) return Swal.fire('‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏á‡∏¥‡∏ô','','warning');
                
                if(finType === 'withdraw' && amt > userData.balance) return Swal.fire('‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠','','error');
                
                db.ref('transactions').push({uid:user.uid, name:userData.name, type:finType, amount:Number(amt), time:time, status:'pending', timestamp:Date.now()});
                if(finType === 'withdraw') db.ref('users/'+user.uid).update({balance: userData.balance - Number(amt)});
                
                Swal.fire('‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à','‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡πÅ‡∏•‡πâ‡∏ß','success');
                UI.page('home');
            }
        };

        const UI = {
            toggle: (id) => { document.getElementById('f-login').classList.add('hidden'); document.getElementById('f-reg').classList.add('hidden'); document.getElementById('f-'+id).classList.remove('hidden'); },
            page: (p) => {
                if(p === 'deposit') { finType = 'deposit'; document.getElementById('fin-title').innerText='‡πÅ‡∏à‡πâ‡∏á‡∏ù‡∏≤‡∏Å‡πÄ‡∏á‡∏¥‡∏ô'; document.getElementById('bank-area').classList.remove('hidden'); document.getElementById('fin-time').classList.remove('hidden'); }
                if(p === 'withdraw') { finType = 'withdraw'; document.getElementById('fin-title').innerText='‡πÅ‡∏à‡πâ‡∏á‡∏ñ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô'; document.getElementById('bank-area').classList.add('hidden'); document.getElementById('fin-time').classList.add('hidden'); }
                
                if(p === 'deposit' || p === 'withdraw') { document.getElementById('p-home').classList.add('hidden'); document.getElementById('p-finance').classList.remove('hidden'); }
                else { document.getElementById('p-finance').classList.add('hidden'); document.getElementById('p-home').classList.remove('hidden'); }
            }
        };
    </script>
</body>
</html>
